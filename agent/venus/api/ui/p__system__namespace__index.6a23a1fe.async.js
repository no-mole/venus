"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[422],{59149:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var r=t(30279),a=t.n(r),u=t(35290),i=t.n(u),s=t(411),c=t.n(s),o=t(46686),l=t.n(o),d=t(10305),p=t(7533),f=t(13246),h=t(51955),m=t(61618),v=t(55272),x=t(62995),y=t(93236),j=t(61388),w=t(10571),b=t(76405),k=t(1896),Z=t(62086),C=function(e){var n=e.modalVisible,t=e.onCancel,r=e.onSubmit;return(0,Z.jsxs)(w.Y,{visible:n,autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,onCancel:function(){return t()}},submitTimeout:2e3,onFinish:r,width:440,children:[(0,Z.jsx)(b.A.Group,{children:(0,Z.jsx)(k.Z,{width:"xl",name:"namespace_alias",label:"空间名称",rules:[{required:!0,message:"请输入空间名称！"}]})}),(0,Z.jsx)(b.A.Group,{children:(0,Z.jsx)(k.Z,{width:"xl",name:"namespace_uid",label:"唯一标识",rules:[{required:!0,message:"请输入唯一标识！"}]})})]})},_=t(21364),g=function(){var e=(0,y.useState)(!1),n=l()(e,2),t=n[0],r=n[1],u=(0,y.useRef)(),s=(0,y.useState)([]),o=l()(s,2),w=o[0],b=o[1],k=(0,y.useState)([]),g=l()(k,2),S=g[0],T=g[1],I=(0,y.useState)(""),P=l()(I,2),R=P[0],q=P[1],F=function(){var e=c()(i()().mark((function e(){var n,t,r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.gp)();case 2:0===(null==(n=e.sent)?void 0:n.code)&&(b(null==n||null===(t=n.data)||void 0===t?void 0:t.items),T(null==n||null===(r=n.data)||void 0===r?void 0:r.items));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,y.useEffect)((function(){F()}),[]);var z=function(){var e=c()(i()().mark((function e(n){var t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.ZP.loading("正在添加"),e.prev=1,e.next=4,(0,_.Rz)(a()({},n));case 4:return t(),h.ZP.success("添加成功"),F(),e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(1),t(),h.ZP.error("添加失败请重试！"),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(n){return e.apply(this,arguments)}}(),A=[{title:"空间名称",dataIndex:"namespace_alias"},{title:"唯一标识",dataIndex:"namespace_uid"},{title:"创建时间",valueType:"dateTime",dataIndex:"create_time"},{title:"操作",dataIndex:"option",valueType:"option",render:function(e,n){return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)("a",{onClick:function(){j.history.push({pathname:"/system/namespace/detail",search:"?namespaceUid=".concat(null==n?void 0:n.namespace_uid,"&namespaceAlias=").concat(null==n?void 0:n.namespace_alias)})},children:"查看"})})}}];return(0,Z.jsxs)(d._z,{header:{title:"命名空间管理"},children:[(0,Z.jsx)(p.Z,{style:{marginBlockEnd:16},children:(0,Z.jsxs)(m.Z,{children:[(0,Z.jsx)(p.Z,{children:(0,Z.jsxs)("div",{children:["关键词：",(0,Z.jsx)(v.Z,{style:{width:"240px"},value:R,onChange:function(e){return q(e.target.value)},placeholder:"请输入命名空间唯一标识"})]})}),(0,Z.jsx)(x.Z,{type:"primary",onClick:function(){var e=null==S?void 0:S.filter((function(e){var n;return(null==e||null===(n=e.namespace_uid)||void 0===n?void 0:n.indexOf(R))>-1}));b(e)},children:"查询"}),(0,Z.jsx)(x.Z,{onClick:function(){q(""),F()},children:"重置"})]})}),(0,Z.jsx)(f.Z,{actionRef:u,rowKey:"namespace_uid",toolBarRender:function(){return[(0,Z.jsx)(x.Z,{type:"primary",onClick:function(){return r(!0)},children:"新建"},"1")]},options:!1,dataSource:w,columns:A,search:!1}),(0,Z.jsx)(C,{onCancel:function(){return r(!1)},modalVisible:t,onSubmit:function(){var e=c()(i()().mark((function e(n){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(n);case 2:e.sent&&r(!1);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]})}},21364:function(e,n,t){t.d(n,{Rz:function(){return l},gp:function(){return c}});var r=t(35290),a=t.n(r),u=t(411),i=t.n(u),s=t(61388);function c(){return o.apply(this,arguments)}function o(){return(o=i()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/v1/namespace",{method:"GET"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return d.apply(this,arguments)}function d(){return(d=i()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/v1/namespace/".concat(n.namespace_uid),{method:"POST",data:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
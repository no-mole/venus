"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[422],{69934:function(n,e,t){t.r(e),t.d(e,{default:function(){return g}});var r=t(30279),a=t.n(r),u=t(35290),i=t.n(u),s=t(411),c=t.n(s),o=t(46686),l=t.n(o),d=t(10305),p=t(7533),f=t(13246),h=t(51955),m=t(61618),v=t(55272),x=t(62995),j=t(93236),y=t(12188),w=t(10571),b=t(76405),k=t(1896),Z=t(62086),C=function(n){var e=n.modalVisible,t=n.onCancel,r=n.onSubmit;return(0,Z.jsxs)(w.Y,{visible:e,autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,onCancel:function(){return t()}},submitTimeout:2e3,onFinish:r,width:440,children:[(0,Z.jsx)(b.A.Group,{children:(0,Z.jsx)(k.Z,{width:"xl",name:"namespace_alias",label:"空间名称",rules:[{required:!0,message:"请输入空间名称！"}]})}),(0,Z.jsx)(b.A.Group,{children:(0,Z.jsx)(k.Z,{width:"xl",name:"namespace_uid",label:"唯一标识",rules:[{required:!0,message:"请输入唯一标识！"}]})})]})},_=t(4810),g=function(){var n=(0,j.useState)(!1),e=l()(n,2),t=e[0],r=e[1],u=(0,j.useRef)(),s=(0,j.useState)([]),o=l()(s,2),w=o[0],b=o[1],k=(0,j.useState)([]),g=l()(k,2),S=g[0],I=g[1],P=(0,j.useState)(""),R=l()(P,2),q=R[0],F=R[1],T=function(){var n=c()(i()().mark((function n(){var e,t,r;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,_.gp)();case 2:0===(null==(e=n.sent)?void 0:e.code)&&(b(null==e||null===(t=e.data)||void 0===t?void 0:t.items),I(null==e||null===(r=e.data)||void 0===r?void 0:r.items));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();(0,j.useEffect)((function(){T()}),[]);var z=function(){var n=c()(i()().mark((function n(e){var t;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=h.ZP.loading("正在添加"),n.prev=1,n.next=4,(0,_.Rz)(a()({},e));case 4:return t(),h.ZP.success("添加成功"),T(),n.abrupt("return",!0);case 10:return n.prev=10,n.t0=n.catch(1),t(),h.ZP.error("添加失败请重试！"),n.abrupt("return",!1);case 15:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}(),A=[{title:"空间名称",dataIndex:"namespace_alias"},{title:"唯一标识",dataIndex:"namespace_uid"},{title:"创建时间",dataIndex:"create_time"},{title:"操作",dataIndex:"option",valueType:"option",render:function(n,e){return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)("a",{onClick:function(){y.history.push({pathname:"/system/namespace/detail",search:"?namespaceUid=".concat(null==e?void 0:e.namespace_uid,"&namespaceAlias=").concat(null==e?void 0:e.namespace_alias)})},children:"查看"})})}}];return(0,Z.jsxs)(d._z,{header:{title:"命名空间管理"},children:[(0,Z.jsx)(p.Z,{style:{marginBlockEnd:16},children:(0,Z.jsxs)(m.Z,{children:[(0,Z.jsx)(p.Z,{children:(0,Z.jsxs)("div",{children:["关键词：",(0,Z.jsx)(v.Z,{style:{width:"240px"},value:q,onChange:function(n){return F(n.target.value)},placeholder:"请输入命名空间唯一标识"})]})}),(0,Z.jsx)(x.Z,{type:"primary",onClick:function(){var n=null==S?void 0:S.filter((function(n){var e;return(null==n||null===(e=n.namespace_uid)||void 0===e?void 0:e.indexOf(q))>-1}));b(n)},children:"查询"}),(0,Z.jsx)(x.Z,{onClick:function(){F(""),T()},children:"重置"})]})}),(0,Z.jsx)(f.Z,{actionRef:u,rowKey:"namespace_uid",toolBarRender:function(){return[(0,Z.jsx)(x.Z,{type:"primary",onClick:function(){return r(!0)},children:"新建"},"1")]},options:!1,dataSource:w,columns:A,search:!1}),(0,Z.jsx)(C,{onCancel:function(){return r(!1)},modalVisible:t,onSubmit:function(){var n=c()(i()().mark((function n(e){return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z(e);case 2:n.sent&&r(!1);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})]})}},4810:function(n,e,t){t.d(e,{Rz:function(){return l},gp:function(){return c}});var r=t(35290),a=t.n(r),u=t(411),i=t.n(u),s=t(12188);function c(){return o.apply(this,arguments)}function o(){return(o=i()(a()().mark((function n(){return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,s.request)("/api/v1/namespace",{method:"GET"}));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function l(n){return d.apply(this,arguments)}function d(){return(d=i()(a()().mark((function n(e){return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,s.request)("/api/v1/namespace/".concat(e.namespace_uid),{method:"POST",data:e}));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}}}]);